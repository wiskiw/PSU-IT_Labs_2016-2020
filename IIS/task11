;11.  Указать то число из заданного интервала целых чисел, в двоичном представлении которого больше всего единиц.

; число, с максимальным число единиц
(defglobal ?*maxUnitN* = 0)

; кол-во единиц в числе maxUnitN
(defglobal ?*maxUnitNNumber* = 0)


(defglobal ?*maxUnitNNumberTemp* = 0)
(defglobal ?*i* = 0)


(deffunction main(?lowerBound ?upperBound)
	
	(bind ?*maxUnitN* 0)
	(bind ?*maxUnitNNumber* 0)
	
	(bind ?*i* ?lowerBound)
	(while (<= ?*i* ?upperBound)
	
		(bind ?*maxUnitNNumberTemp* (countUnitNumber ?*i*))
				
		(if	(<= ?*maxUnitNNumber* ?*maxUnitNNumberTemp*) then 
			(bind ?*maxUnitNNumber* ?*maxUnitNNumberTemp*)
			(bind ?*maxUnitN* ?*i*)
		)
		
		(bind ?*i* (+ ?*i* 1))
	)
	
	
	(printout t "In range [" ?lowerBound ", " ?upperBound "] a " ?*maxUnitN* " has the highest number of units in binary mode: " ?*maxUnitNNumber* "." crlf)
	
	;(return ?*maxUnitN*)
)




(defglobal ?*unitNumber* = 0)

; подсчитывает количество единиц в двоичном представлении числа ?number
(deffunction countUnitNumber(?number)
	
	(bind ?*unitNumber* 0)
	
	(while (>=  ?number 1)
		
		; (mod ?number 2) - значение 1/0
		
		(bind ?*unitNumber* (+ ?*unitNumber* (mod ?number 2)))
		(bind ?number (div ?number 2))
	)	
	(return ?*unitNumber*)
)
