компиляция:
g++ -std=c++11 -c lib_src.cc -o static.o

упаковка:
ar rc libMY_STATIC.a static.o



Проиндексируем функции внутри библиотеки для более быстрой линковки:
ranlib libMY_STATIC.a

Линковка и компиляция программы с библиотекой
g++ -std=c++11 program1.cpp libMY_STATIC.a -o a.out





1. Получим файл с объектным кодом:
g++ -fPIC  -std=c++11 -c lib_src.cpp -o dynamic.o
(используйте gcc для программ на С и Assembler'е)
Здесь:
-fPIC - использовать относительную адресацию в переходах подпрограмм - во избежание конфликтов при динамическом связывании.


2. А теперь из объектного файла получим библиотеку:
g++ -shared -olibdynamic.so dynamic.o
(используйте gcc для программ на С)
libdynamic.so - имя результирующей библиотеки;
-shared - предписывает создать динамическую (т.е. "разделяемую") библиотеку.
* Именуйте динамические библиотеки следующим способом: libNAME.so. Это традиция.



3. Теперь добьемся того, чтобы система смогла найти нашу библиотеку. Поместим libdynamic.so в один из каталогов:
из списка:
echo $LD_LIBRARY_PATH
/lib
/usr/lib
или из списка:
cat /etc/ld.so.conf
и затем выполните "sudo ldconfig"


gcc ИСХОДНИК -lИМЯ_БИБЛИОТЕКИ -o РЕЗУЛЬТИРУЮЩИЙ_БИНАРИК
g++ -std=c++11 program1.cpp -L/home/urs/lib/ -ldynamic
g++ -std=c++11 program1.cpp -L/home/urs/lib/ -ldynamic

