<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="by.pdu.dormitory.mapper.PropertyMapper">

    <resultMap id="propertyResultMap" type="by.pdu.dormitory.domain.Property">
        <id column="property_id" property="id"/>
        <result column="property_name" property="name"/>
    </resultMap>

    <select id="getProperty" resultMap="propertyResultMap">
        SELECT
            id as "property_id",
            name as "property_name"
        FROM
            PROPERTY
        ORDER BY id ASC
    </select>

    <select id="getPropertyTenant" resultMap="propertyResultMap">
        SELECT
        p.id as "property_id",
        p.name as "property_name"
        FROM PROPERTY p
        INNER JOIN PROPERTY_TENANT pt ON pt.property_id = p.id
        WHERE
        pt.tenant_id = #{id}
    </select>

    <insert id="insertProperty">
        INSERT INTO PROPERTY(NAME)
        VALUES(#{name})
    </insert>

    <update id="updateProperty">
        UPDATE PROPERTY
        SET NAME =#{name}
        WHERE id = #{id}
    </update>

    <delete id="deleteProperty">
        DELETE FROM PROPERTY
        WHERE id = #{id}
    </delete>
</mapper>
